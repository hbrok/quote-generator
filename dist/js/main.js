var App=function(){var e,t,o,n,r=new XMLHttpRequest,s="",a=[],u=[],l=[],c=document.getElementById("js-quote-text"),i=document.getElementById("js-quote-author"),d=document.getElementById("js-quote-link"),g=document.getElementById("js-quote-source"),m=document.getElementById("js-font-link"),f=document.getElementById("js-new-font"),h=document.getElementById("js-new-quote"),b=document.getElementById("js-new-colors"),y=document.getElementById("js-color-one"),p=document.getElementById("js-color-two"),v=!1,A=function(){e=document.styleSheets[2],t=document.body.getAttribute("data-font"),o=document.body.getAttribute("data-colorone"),n=document.body.getAttribute("data-colortwo"),f.addEventListener("click",function(e){e.preventDefault(),f.setAttribute("data-loading",""),0===u.length?(s="font",q()):u.length>0&&I()}),h.addEventListener("click",function(e){e.preventDefault(),h.setAttribute("data-loading",""),s="quote",q()}),b.addEventListener("click",function(e){e.preventDefault(),b.setAttribute("data-loading",""),s="colors",q()})},w=function(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e))+e},E=function(e){var t=document.createElement("script"),o=document.scripts[0];t.src=e,o.parentNode.insertBefore(t,o)},q=function(){r&&(r.open("GET","ajax-getdata.php?function="+s,!0),r.onreadystatechange=j,r.send())},j=function(){if(r.readyState===XMLHttpRequest.DONE)if(200===r.status){var e=JSON.parse(r.responseText.replace("\\'","'"));switch(s){case"font":u=e.items,I();break;case"colors":a=e[0],B();break;case"quote":l=e,k();break;default:alert("No request type set.")}}else console.log("There was a problem with the request.")},L=function(){var e="http://"+window.location.hostname+"/src/?",r="c1="+o+"&c2="+n,s="&quote="+c.innerHTML+"&author="+i.innerHTML+"&id="+d.getAttribute("href").slice(d.getAttribute("href").length-11,d.getAttribute("href").length-1),a="&font="+t,u=encodeURI(e+r+s+a);g.setAttribute("href",u)},M=function(e,t){WebFontConfig={google:{families:[e+":"+t]},timeout:2e3},E("https://ajax.googleapis.com/ajax/libs/webfont/1.6.16/webfont.js")},k=function(){v||(v=!0,M(t)),c.innerHTML=l.quoteText,l.quoteAuthor.length>0?i.innerHTML=l.quoteAuthor:i.innerHTML="Anonymous",d.setAttribute("href",l.quoteLink),L(),h.removeAttribute("data-loading")},B=function(){o=a.color_one,n=a.color_two,y.innerHTML=o,p.innerHTML=n,e.cssRules[1].style.color=o,e.cssRules[2].style.backgroundColor=o,e.cssRules[3].style.color=n,e.cssRules[4].style.borderColor=n,e.cssRules[5].style.backgroundColor=n,o=o.slice(1),n=n.slice(1);var t=document.getElementById("js-colors-vote-link");t.setAttribute("href","http://randoma11y.com/#/?hex="+o+"&compare="+n),L(),b.removeAttribute("data-loading")},I=function(){var o=w(0,u.length),n="regular",r=!1;t=u[o].family,console.log(t);for(var s=0;s<u[o].variants.length;s++)"regular"===u[o].variants[s]&&(r=!0);r||(n=u[o].variants[0]),M(t,n),e.cssRules[0].style.fontFamily=t,m.setAttribute("href","https://fonts.google.com/specimen/"+t),m.innerHTML=t,L(),f.removeAttribute("data-loading")};return{init:A,getNewQuote:k,getNewColors:B,getNewFont:I}}();